<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NOX | The Architectural Singularity</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;600&family=Manrope:wght@200;300;400&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://unpkg.com/@studio-freight/lenis@1.0.33/dist/lenis.min.js"></script>

    <style>
        :root {
            --bg: #000000;
            --gold: #D4AF37;
            --glass: rgba(255, 255, 255, 0.03);
        }
        
        body { 
            background-color: var(--bg); 
            color: white; 
            font-family: 'Manrope', sans-serif; 
            overflow-x: hidden; 
            margin: 0;
            cursor: none; 
        }

        .serif { font-family: 'Cinzel', serif; }
        
        #canvas-container {
            position: fixed; top: 0; left: 0;
            width: 100%; height: 100vh;
            z-index: -1; pointer-events: none;
            background: radial-gradient(circle at center, #0a0a0a 0%, #000000 80%);
        }

        /* --- CURSOR --- */
        #cursor-dot {
            width: 6px; height: 6px; background: white; position: fixed; 
            top: 0; left: 0; border-radius: 50%; pointer-events: none; z-index: 9999;
            transform: translate(-50%, -50%); mix-blend-mode: difference;
        }
        #cursor-ring { 
            width: 50px; height: 50px; border: 1px solid rgba(255,255,255,0.3); 
            position: fixed; top: 0; left: 0; border-radius: 50%; pointer-events: none; z-index: 9999;
            transform: translate(-50%, -50%); transition: all 0.2s ease-out;
        }

        /* --- UI --- */
        .glass-panel {
            background: var(--glass);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 40px 80px rgba(0,0,0,0.9);
        }

        .hero-title {
            font-size: clamp(4rem, 11vw, 13rem);
            line-height: 0.8;
            letter-spacing: -0.04em;
            background: linear-gradient(180deg, #fff 0%, #444 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            opacity: 0; transform: translateY(30px);
        }

        .nav-link {
            font-size: 0.65rem; letter-spacing: 0.25em; text-transform: uppercase;
            position: relative; opacity: 0.6; transition: opacity 0.3s;
        }
        .nav-link:hover { opacity: 1; color: var(--gold); }

        .section-counter {
            font-family: 'Cinzel', serif; font-size: 12rem; line-height: 1;
            position: absolute; right: -3rem; top: -6rem;
            background: linear-gradient(180deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 100%);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            z-index: -1; pointer-events: none;
        }
    </style>
</head>
<body>

    <div id="canvas-container"></div>
    <div id="cursor-dot"></div>
    <div id="cursor-ring"></div>

    <nav class="fixed top-0 w-full z-50 flex justify-between items-center px-10 py-8 mix-blend-difference">
        <div class="serif text-2xl tracking-[0.25em] font-bold">NOX.</div>
        <div class="hidden md:flex gap-16">
            <a href="#vision" class="nav-link">Philosophy</a>
            <a href="#projects" class="nav-link">The Works</a>
            <a href="#residences" class="nav-link">Private</a>
            <a href="#contact" class="nav-link">Acquire</a>
        </div>
        <div class="md:hidden w-8 h-8 flex flex-col justify-center gap-1.5">
            <div class="w-full h-[1px] bg-white"></div>
            <div class="w-full h-[1px] bg-white"></div>
        </div>
    </nav>

    <section class="h-screen flex items-center px-8 md:px-24 relative" data-building="tower">
        <div class="max-w-6xl z-10 relative">
            <h1 class="hero-title serif uppercase">Structural</h1>
            <h1 class="hero-title serif uppercase pl-[15vw] italic">Elegance</h1>
            
            <div class="mt-24 flex items-start gap-8 max-w-lg ml-auto border-l border-white/20 pl-8 opacity-0 hero-fade">
                <p class="text-xs font-light tracking-[0.2em] leading-loose text-gray-400 uppercase">
                    Architecture as art. Engineering as poetry. <br>Welcome to the new epoch of living.
                </p>
            </div>
        </div>
        
        <div class="absolute bottom-12 left-12 flex flex-col items-center gap-4 hero-fade opacity-0">
            <div class="w-[1px] h-24 bg-gradient-to-b from-white to-transparent"></div>
            <span class="text-[9px] uppercase tracking-[0.3em]">Explore</span>
        </div>
    </section>

    <section id="vision" class="min-h-screen flex items-center justify-end px-8 md:px-24 py-32 relative" data-building="museum">
        <div class="max-w-xl relative glass-panel p-16 z-10">
            <span class="section-counter">01</span>
            <span class="text-gold text-[9px] uppercase tracking-[0.4em] block mb-8">The Philosophy</span>
            <h2 class="text-5xl serif mb-6 leading-tight">The Modern <br><span class="italic text-gray-400">Sanctuary</span></h2>
            <p class="text-sm font-light text-gray-300 leading-loose mb-12">
                We utilize "invisible structure" engineering—cantilevered floating slabs and structural glass—to erase the boundary between the inhabitant and the horizon.
            </p>
            <button class="text-[10px] uppercase tracking-[0.3em] border-b border-white/30 pb-2 hover:border-gold hover:text-gold transition-all">Read The Manifesto</button>
        </div>
    </section>

    <section id="projects" class="min-h-screen py-40 px-8 md:px-24 relative" data-building="colosseum">
        <div class="relative z-10 mb-32 pl-8 border-l border-gold/30">
            <span class="section-counter left-0 right-auto">02</span>
            <h2 class="text-7xl serif mb-4">Civic <span class="text-gold italic">Grandeur</span></h2>
            <p class="max-w-md text-sm text-gray-400 font-light leading-relaxed tracking-wide">
                Reimagining historical icons for the modern metropolis.
            </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-24 w-full relative z-10">
            <div class="group cursor-pointer">
                <div class="overflow-hidden relative aspect-[4/5] border border-white/10">
                    <img src="https://images.unsplash.com/photo-1552832230-c0197dd311b5?q=80&w=1000&auto=format&fit=crop" class="w-full h-full object-cover grayscale opacity-50 group-hover:opacity-100 group-hover:scale-110 transition-all duration-1000">
                    <div class="absolute inset-0 bg-black/20 group-hover:bg-transparent transition-all duration-700"></div>
                </div>
                <div class="mt-6">
                    <h3 class="serif text-3xl italic">The New Colosseum</h3>
                    <p class="text-[9px] uppercase tracking-widest mt-2 text-gold">Rome, Italy</p>
                </div>
            </div>
            
            <div class="group cursor-pointer mt-0 md:mt-32">
                <div class="overflow-hidden relative aspect-[4/5] border border-white/10">
                    <img src="https://images.unsplash.com/photo-1520250497591-112f2f40a3f4?q=80&w=1000&auto=format&fit=crop" class="w-full h-full object-cover grayscale opacity-50 group-hover:opacity-100 group-hover:scale-110 transition-all duration-1000">
                    <div class="absolute inset-0 bg-black/20 group-hover:bg-transparent transition-all duration-700"></div>
                </div>
                <div class="mt-6">
                    <h3 class="serif text-3xl italic">The Retreat</h3>
                    <p class="text-[9px] uppercase tracking-widest mt-2 text-gold">Kyoto, Japan</p>
                </div>
            </div>
        </div>
    </section>

    <section id="residences" class="min-h-screen flex items-center px-8 md:px-24 py-32 relative" data-building="home">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-24 items-center z-10 w-full">
            <div class="relative">
                 <span class="section-counter top-[-8rem]">03</span>
                 <h2 class="text-6xl md:text-9xl serif leading-[0.8] mb-12">
                     Organic <br> <span class="italic text-gray-500">Flow.</span>
                 </h2>
                 <div class="space-y-6 border-t border-white/10 pt-8">
                     <div class="group cursor-pointer hover:translate-x-4 transition-transform duration-500">
                         <div class="flex justify-between items-baseline mb-2">
                             <h4 class="uppercase tracking-widest text-xs group-hover:text-gold transition-colors">Stacked Villa</h4>
                             <span class="text-xs opacity-50">01</span>
                         </div>
                         <p class="text-gray-500 font-light text-sm">Cantilevered Slabs • Hanging Gardens</p>
                     </div>
                     <div class="w-full h-[1px] bg-white/5"></div>
                     <div class="group cursor-pointer hover:translate-x-4 transition-transform duration-500">
                         <div class="flex justify-between items-baseline mb-2">
                             <h4 class="uppercase tracking-widest text-xs group-hover:text-gold transition-colors">Sky Penthouse</h4>
                             <span class="text-xs opacity-50">02</span>
                         </div>
                         <p class="text-gray-500 font-light text-sm">360° Views • Private Elevator</p>
                     </div>
                 </div>
            </div>
        </div>
    </section>

    <section id="contact" class="h-screen flex flex-col justify-center px-8 md:px-24 bg-black relative border-t border-white/10" data-building="grid">
        <div class="flex flex-col md:flex-row justify-between items-end gap-16 z-10">
            <div>
                <h2 class="text-[20vw] serif leading-none opacity-[0.03] select-none absolute left-0 bottom-0 pointer-events-none">NOX</h2>
                <h3 class="text-5xl serif relative z-10 mb-8">Acquire Your <span class="italic text-gold">Legacy.</span></h3>
                <p class="text-gray-500 text-sm max-w-sm font-light leading-relaxed">
                    Private viewings available by appointment.
                </p>
            </div>
            
            <form class="w-full md:w-[400px] space-y-10 relative z-20">
                <input type="text" placeholder="NAME / ORGANIZATION" class="w-full bg-transparent border-b border-white/20 py-4 outline-none text-white placeholder-gray-600 font-light text-xs tracking-widest focus:border-gold transition-colors">
                <input type="email" placeholder="CONTACT EMAIL" class="w-full bg-transparent border-b border-white/20 py-4 outline-none text-white placeholder-gray-600 font-light text-xs tracking-widest focus:border-gold transition-colors">
                <button class="w-full py-5 bg-white text-black uppercase tracking-[0.3em] text-[9px] font-bold hover:bg-gold hover:text-black transition-all">
                    Request Invitation
                </button>
            </form>
        </div>
        
        <footer class="absolute bottom-10 left-0 w-full px-10 md:px-24 flex justify-between text-[9px] uppercase tracking-widest text-gray-600">
            <p>© 2026 NOX Real Estate.</p>
            <div class="flex gap-8">
                <a href="#">Instagram</a>
                <a href="#">LinkedIn</a>
            </div>
        </footer>
    </section>

    <script>
        // --- SETUP ---
        const lenis = new Lenis({ duration: 1.2, smooth: true });
        function raf(time) { lenis.raf(time); requestAnimationFrame(raf); }
        requestAnimationFrame(raf);

        // --- THREE.JS SCENE ---
        const container = document.getElementById('canvas-container');
        const scene = new THREE.Scene();
        scene.fog = new THREE.FogExp2(0x000000, 0.02); // Atmosphere

        const camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 0, 35);

        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        container.appendChild(renderer.domElement);

        // --- MATERIALS ---
        const coreMat = new THREE.LineBasicMaterial({ color: 0xffffff, transparent: true, opacity: 0.7, linewidth: 2 });
        const ghostMat = new THREE.LineBasicMaterial({ color: 0x666666, transparent: true, opacity: 0.1, depthWrite: false });
        const goldMat = new THREE.LineBasicMaterial({ color: 0xD4AF37, transparent: true, opacity: 0.8 });

        // Helper: Creates "Blueprint" style double-lines
        function createHologram(geo, group) {
            const edges = new THREE.EdgesGeometry(geo);
            const core = new THREE.LineSegments(edges, coreMat);
            const ghost = new THREE.LineSegments(edges, ghostMat);
            ghost.scale.set(1.02, 1.02, 1.02); // Depth effect
            group.add(core);
            group.add(ghost);
            return core;
        }

        // --- 1. TOWER (Skyscraper) ---
        const towerGroup = new THREE.Group();
        createHologram(new THREE.BoxGeometry(4, 30, 4), towerGroup); // Core
        for(let i=0; i<30; i+=2.5) {
            const floor = new THREE.BoxGeometry(4.5, 0.1, 4.5);
            floor.translate(0, i - 15, 0);
            createHologram(floor, towerGroup);
        }
        scene.add(towerGroup);

        // --- 2. MUSEUM (Cantilever) ---
        const museumGroup = new THREE.Group();
        const main = new THREE.BoxGeometry(20, 4, 10);
        createHologram(main, museumGroup);
        const support = new THREE.BoxGeometry(6, 15, 6);
        support.translate(-5, -6, 0);
        createHologram(support, museumGroup);
        museumGroup.visible = false;
        scene.add(museumGroup);

        // --- 3. THE COLOSSEUM (Procedural Amphitheater) ---
        const colosseumGroup = new THREE.Group();
        
        // Function to create an arch ring
        function createArchRing(radius, y, count) {
            for(let i=0; i<count; i++) {
                const angle = (i / count) * Math.PI * 2;
                
                // Pillar
                const pillarGeo = new THREE.BoxGeometry(0.4, 3, 0.4);
                pillarGeo.translate(Math.cos(angle)*radius, y, Math.sin(angle)*radius);
                pillarGeo.rotateY(-angle);
                createHologram(pillarGeo, colosseumGroup);

                // Arch Top (Torus Segment)
                const archGeo = new THREE.TorusGeometry(0.8, 0.05, 4, 12, Math.PI);
                archGeo.rotateZ(Math.PI/2); // Upright
                archGeo.rotateY(angle + Math.PI/2); // Face outward
                archGeo.translate(Math.cos(angle)*radius, y+1.5, Math.sin(angle)*radius);
                
                const edges = new THREE.EdgesGeometry(archGeo);
                const line = new THREE.LineSegments(edges, coreMat);
                colosseumGroup.add(line);
            }
        }

        // Build 3 Tiers
        createArchRing(12, -4, 32); // Bottom
        createArchRing(12, -1, 32); // Middle
        createArchRing(12, 2, 32);  // Top
        
        // Base Plinth (Elliptical scaled)
        const baseGeo = new THREE.CylinderGeometry(13, 13, 0.5, 64);
        baseGeo.translate(0, -6, 0);
        createHologram(baseGeo, colosseumGroup);
        
        // Interior Seating (Stepped Rings)
        for(let i=1; i<5; i++) {
            const seatGeo = new THREE.TorusGeometry(11 - (i*1.5), 0.1, 4, 64);
            seatGeo.rotateX(Math.PI/2);
            seatGeo.translate(0, -5 + (i*0.8), 0);
            const seatEdges = new THREE.EdgesGeometry(seatGeo);
            const seat = new THREE.LineSegments(seatEdges, ghostMat);
            colosseumGroup.add(seat);
        }

        colosseumGroup.scale.set(1.2, 1, 1); // Make it Elliptical
        colosseumGroup.visible = false;
        scene.add(colosseumGroup);

        // --- 4. VILLA (Stacked) ---
        const homeGroup = new THREE.Group();
        for(let i=0; i<5; i++) {
            const w = 6 + Math.random()*4;
            const d = 6 + Math.random()*4;
            const slab = new THREE.BoxGeometry(w, 0.5, d);
            slab.translate((Math.random()-0.5)*3, (i*2)-4, (Math.random()-0.5)*3);
            createHologram(slab, homeGroup);
        }
        homeGroup.visible = false;
        scene.add(homeGroup);

        // --- 5. STARS ---
        const starGeo = new THREE.BufferGeometry();
        const starCount = 2000;
        const pos = new Float32Array(starCount * 3);
        for(let i=0; i<starCount*3; i++) pos[i] = (Math.random()-0.5)*120;
        starGeo.setAttribute('position', new THREE.BufferAttribute(pos, 3));
        const starMat = new THREE.PointsMaterial({color: 0xffffff, size: 0.1, transparent: true, opacity: 0.5});
        const starField = new THREE.Points(starGeo, starMat);
        scene.add(starField);

        // --- ANIMATION ---
        gsap.registerPlugin(ScrollTrigger);
        
        // Intro
        gsap.to(".hero-title", {opacity: 1, y: 0, duration: 1.5, stagger: 0.2, ease: "power3.out"});
        gsap.to(".hero-fade", {opacity: 1, duration: 1.5, delay: 0.8});

        const buildings = {
            tower: towerGroup,
            museum: museumGroup,
            colosseum: colosseumGroup,
            home: homeGroup,
            grid: towerGroup
        };
        let current = towerGroup;

        function switchBuilding(name) {
            const next = buildings[name];
            if(!next || next === current) return;

            const prev = current;
            current = next;

            // Animate OUT
            gsap.to(prev.scale, {x:0, y:0, z:0, duration: 1, ease: "back.in(1.5)", onComplete: () => prev.visible = false});
            
            // Animate IN
            next.visible = true;
            next.rotation.y = -0.5;
            gsap.fromTo(next.scale, {x:0, y:0, z:0}, {x: (name==='colosseum'?1.2:1), y:1, z:1, duration: 1.5, ease: "back.out(1.2)", delay: 0.2});
            gsap.to(next.rotation, {y: 0, duration: 2, ease: "power2.out", delay: 0.2});
        }

        document.querySelectorAll('section').forEach(sec => {
            ScrollTrigger.create({
                trigger: sec, start: "top center", end: "bottom center",
                onEnter: () => switchBuilding(sec.dataset.building),
                onEnterBack: () => switchBuilding(sec.dataset.building)
            });
        });

        // Loop
        let mouseX=0, mouseY=0;
        document.addEventListener('mousemove', e => {
            mouseX = (e.clientX/window.innerWidth-0.5)*2;
            mouseY = (e.clientY/window.innerHeight-0.5)*2;
            gsap.to('#cursor-dot', {x: e.clientX, y: e.clientY, duration: 0.1});
            gsap.to('#cursor-ring', {x: e.clientX, y: e.clientY, duration: 0.2});
        });

        function animate() {
            requestAnimationFrame(animate);
            if(current) current.rotation.y += 0.001;
            starField.rotation.y += 0.0002;
            
            camera.position.x += (mouseX*2 - camera.position.x)*0.05;
            camera.position.y += (-mouseY*2 - camera.position.y)*0.05;
            camera.lookAt(0,0,0);
            
            renderer.render(scene, camera);
        }
        animate();

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth/window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
        
        // Links Hover
        document.querySelectorAll('a, button').forEach(el => {
            el.addEventListener('mouseenter', () => gsap.to('#cursor-ring', {scale: 1.5, borderColor: '#D4AF37'}));
            el.addEventListener('mouseleave', () => gsap.to('#cursor-ring', {scale: 1, borderColor: 'rgba(255,255,255,0.3)'}));
        });
    </script>
</body>
</html>