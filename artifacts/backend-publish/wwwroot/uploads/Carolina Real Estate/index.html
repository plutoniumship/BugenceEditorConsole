<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NOX | The Architectural Singularity</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;600&family=Manrope:wght@200;300;400&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://unpkg.com/@studio-freight/lenis@1.0.33/dist/lenis.min.js"></script>

    <style>
        :root {
            --bg: #000000;
            --gold: #D4AF37;
            --glass: rgba(255, 255, 255, 0.03);
        }
        
        body { 
            background-color: var(--bg); 
            color: white; 
            font-family: 'Manrope', sans-serif; 
            overflow-x: hidden; 
            margin: 0;
            cursor: none; /* Custom Cursor */
        }

        .serif { font-family: 'Cinzel', serif; }
        
        #canvas-container {
            position: fixed; top: 0; left: 0;
            width: 100%; height: 100vh;
            z-index: -1; pointer-events: none;
            background: #000;
        }

        /* --- CUSTOM CURSOR --- */
        #cursor-dot, #cursor-ring {
            position: fixed; top: 0; left: 0;
            transform: translate(-50%, -50%);
            pointer-events: none; z-index: 9999;
            border-radius: 50%;
        }
        #cursor-dot { width: 4px; height: 4px; background: white; }
        #cursor-ring { 
            width: 40px; height: 40px; 
            border: 1px solid rgba(255,255,255,0.2); 
            transition: width 0.3s, height 0.3s, border-color 0.3s;
        }

        /* --- UI ELEMENTS --- */
        .glass-panel {
            background: var(--glass);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 30px 60px rgba(0,0,0,0.8);
            transition: transform 0.5s ease;
        }
        .glass-panel:hover {
            transform: translateY(-5px);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .hero-title {
            font-size: clamp(4rem, 10vw, 12rem);
            line-height: 0.85;
            letter-spacing: -0.04em;
            background: linear-gradient(180deg, #fff 0%, #666 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            opacity: 0; /* Animated in with GSAP */
            transform: translateY(50px);
        }

        .nav-link {
            font-size: 0.7rem; letter-spacing: 0.25em; text-transform: uppercase;
            position: relative; opacity: 0.5; transition: opacity 0.3s;
        }
        .nav-link:hover { opacity: 1; }
        .nav-link::after {
            content: ''; position: absolute; bottom: -5px; left: 0; width: 0%; height: 1px;
            background: var(--gold); transition: width 0.3s ease;
        }
        .nav-link:hover::after { width: 100%; }

        .section-counter {
            font-family: 'Cinzel', serif; font-size: 10rem; line-height: 1;
            position: absolute; right: -2rem; top: -5rem;
            opacity: 0.03; z-index: -1; pointer-events: none;
        }
    </style>
</head>
<body>

    <div id="canvas-container"></div>

    <div id="cursor-dot"></div>
    <div id="cursor-ring"></div>

    <nav class="fixed top-0 w-full z-50 flex justify-between items-center px-10 py-8 mix-blend-difference">
        <div class="serif text-2xl tracking-[0.25em] font-bold">NOX.</div>
        <div class="hidden md:flex gap-16">
            <a href="#vision" class="nav-link">Philosophy</a>
            <a href="#projects" class="nav-link">Works</a>
            <a href="#residences" class="nav-link">Private</a>
            <a href="#contact" class="nav-link">Contact</a>
        </div>
        <div class="md:hidden w-8 h-8 flex flex-col justify-center gap-1.5">
            <div class="w-full h-[1px] bg-white"></div>
            <div class="w-full h-[1px] bg-white"></div>
        </div>
    </nav>

    <section class="h-screen flex items-center px-8 md:px-24 relative" data-building="tower">
        <div class="max-w-6xl z-10 relative">
            <h1 class="hero-title serif uppercase">Structural</h1>
            <h1 class="hero-title serif uppercase pl-[15vw] italic">Sovereignty</h1>
            
            <div class="mt-20 flex items-start gap-8 max-w-lg ml-auto border-l border-white/20 pl-8 opacity-0 hero-fade">
                <p class="text-xs font-light tracking-[0.2em] leading-loose text-gray-400 uppercase">
                    Curating the skyline. Merging brutalist power with crystalline transparency for the ultra-elite.
                </p>
            </div>
        </div>
        
        <div class="absolute bottom-12 left-12 flex flex-col items-center gap-4 hero-fade opacity-0">
            <div class="w-[1px] h-16 bg-gradient-to-b from-white to-transparent"></div>
            <span class="text-[9px] uppercase tracking-[0.3em]">Scroll</span>
        </div>
    </section>

    <section id="vision" class="min-h-screen flex items-center justify-end px-8 md:px-24 py-32 relative" data-building="museum">
        <div class="max-w-xl relative glass-panel p-16 z-10">
            <span class="section-counter">01</span>
            <span class="text-gold text-[9px] uppercase tracking-[0.4em] block mb-8">The Philosophy</span>
            <h2 class="text-5xl serif mb-6 leading-tight">The Modern <br><span class="italic text-gray-400">Sanctuary</span></h2>
            <p class="text-sm font-light text-gray-300 leading-loose mb-12">
                We believe a home is a museum of the self. Our "Gallery Series" utilizes cantilevered floating slabs and invisible structural glass to erase the boundary between art, nature, and inhabitant.
            </p>
            <div class="flex gap-8">
                <div class="text-center">
                    <span class="block text-2xl serif">24</span>
                    <span class="text-[9px] uppercase tracking-widest text-gray-500">Awards</span>
                </div>
                <div class="text-center border-l border-white/10 pl-8">
                    <span class="block text-2xl serif">08</span>
                    <span class="text-[9px] uppercase tracking-widest text-gray-500">Countries</span>
                </div>
            </div>
        </div>
    </section>

    <section id="projects" class="min-h-screen py-40 px-8 md:px-24 relative" data-building="opera">
        <div class="relative z-10 mb-32 pl-8 border-l border-gold/30">
            <span class="section-counter left-0 right-auto">02</span>
            <h2 class="text-7xl serif mb-4">Civic <span class="text-gold italic">Grandeur</span></h2>
            <p class="max-w-md text-sm text-gray-400 font-light leading-relaxed tracking-wide">
                Landmark developments that function as cultural epicenters.
            </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-24 w-full relative z-10">
            <div class="group cursor-pointer">
                <div class="overflow-hidden relative aspect-[4/5] border border-white/10">
                    <img src="https://images.unsplash.com/photo-1548625361-17c376510300?q=80&w=1000&auto=format&fit=crop" class="w-full h-full object-cover grayscale opacity-50 group-hover:opacity-100 group-hover:scale-110 transition-all duration-1000">
                    <div class="absolute inset-0 bg-black/40 group-hover:bg-transparent transition-all duration-700"></div>
                </div>
                <div class="mt-6 flex justify-between items-end">
                    <div>
                        <h3 class="serif text-3xl italic">The Coliseum</h3>
                        <p class="text-[9px] uppercase tracking-widest mt-2 text-gold">Rome, Italy</p>
                    </div>
                    <span class="text-2xl font-light opacity-20 group-hover:opacity-100 transition-opacity">→</span>
                </div>
            </div>
            
            <div class="group cursor-pointer mt-0 md:mt-32">
                <div class="overflow-hidden relative aspect-[4/5] border border-white/10">
                    <img src="https://images.unsplash.com/photo-1516554536643-98319e34e55e?q=80&w=1000&auto=format&fit=crop" class="w-full h-full object-cover grayscale opacity-50 group-hover:opacity-100 group-hover:scale-110 transition-all duration-1000">
                    <div class="absolute inset-0 bg-black/40 group-hover:bg-transparent transition-all duration-700"></div>
                </div>
                <div class="mt-6 flex justify-between items-end">
                    <div>
                        <h3 class="serif text-3xl italic">The Opera</h3>
                        <p class="text-[9px] uppercase tracking-widest mt-2 text-gold">Vienna, Austria</p>
                    </div>
                    <span class="text-2xl font-light opacity-20 group-hover:opacity-100 transition-opacity">→</span>
                </div>
            </div>
        </div>
    </section>

    <section id="residences" class="min-h-screen flex items-center px-8 md:px-24 py-32 relative" data-building="home">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-24 items-center z-10 w-full">
            <div class="relative">
                 <span class="section-counter top-[-8rem]">03</span>
                 <h2 class="text-6xl md:text-9xl serif leading-[0.8] mb-12">
                     Organic <br> <span class="italic text-gray-500">Flow.</span>
                 </h2>
                 <div class="space-y-6 border-t border-white/10 pt-8">
                     <div class="group cursor-pointer hover:pl-4 transition-all duration-300">
                         <div class="flex justify-between items-baseline mb-2">
                             <h4 class="uppercase tracking-widest text-xs group-hover:text-gold transition-colors">The Stacked Villa</h4>
                             <span class="text-xs opacity-50">01</span>
                         </div>
                         <p class="text-gray-500 font-light text-sm">Cantilevered concrete slabs • Private Hanging Gardens</p>
                     </div>
                     <div class="w-full h-[1px] bg-white/5"></div>
                     <div class="group cursor-pointer hover:pl-4 transition-all duration-300">
                         <div class="flex justify-between items-baseline mb-2">
                             <h4 class="uppercase tracking-widest text-xs group-hover:text-gold transition-colors">The Glass Box</h4>
                             <span class="text-xs opacity-50">02</span>
                         </div>
                         <p class="text-gray-500 font-light text-sm">360° Forest Views • Invisible Structure</p>
                     </div>
                 </div>
            </div>
        </div>
    </section>

    <section id="contact" class="h-screen flex flex-col justify-center px-8 md:px-24 bg-black relative border-t border-white/10" data-building="grid">
        <div class="flex flex-col md:flex-row justify-between items-end gap-16 z-10">
            <div>
                <h2 class="text-[18vw] serif leading-none opacity-5 select-none absolute left-0 bottom-0 pointer-events-none">NOX</h2>
                <h3 class="text-5xl serif relative z-10 mb-8">Acquire Your <span class="italic text-gold">Legacy.</span></h3>
                <p class="text-gray-500 text-sm max-w-sm font-light leading-relaxed">
                    Private viewings are available by appointment only. Please provide your credentials below.
                </p>
            </div>
            
            <form class="w-full md:w-[400px] space-y-8 relative z-20">
                <div class="relative group">
                    <input type="text" placeholder="NAME / ORGANIZATION" class="w-full bg-transparent border-b border-white/20 py-4 outline-none text-white placeholder-gray-600 font-light text-xs tracking-widest focus:border-gold transition-colors">
                </div>
                <div class="relative group">
                    <input type="email" placeholder="CONTACT EMAIL" class="w-full bg-transparent border-b border-white/20 py-4 outline-none text-white placeholder-gray-600 font-light text-xs tracking-widest focus:border-gold transition-colors">
                </div>
                <button class="w-full py-5 bg-white text-black uppercase tracking-[0.3em] text-[9px] font-bold hover:bg-gold hover:text-black transition-all mt-8">
                    Request Invitation
                </button>
            </form>
        </div>
        
        <footer class="absolute bottom-10 left-0 w-full px-10 md:px-24 flex justify-between text-[9px] uppercase tracking-widest text-gray-600">
            <p>© 2026 NOX Real Estate.</p>
            <div class="flex gap-8">
                <a href="#" class="hover:text-white transition">Instagram</a>
                <a href="#" class="hover:text-white transition">LinkedIn</a>
            </div>
        </footer>
    </section>

    <script>
        // --- 1. SETUP ---
        const lenis = new Lenis({ 
            duration: 1.2, 
            easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
            smooth: true
        });
        function raf(time) { lenis.raf(time); requestAnimationFrame(raf); }
        requestAnimationFrame(raf);

        // --- 2. THREE.JS SCENE ---
        const container = document.getElementById('canvas-container');
        const scene = new THREE.Scene();
        // Dynamic fog for depth
        scene.fog = new THREE.FogExp2(0x000000, 0.02);

        const camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 0, 30);

        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        container.appendChild(renderer.domElement);

        // --- 3. MATERIALS (Double-Exposure System) ---
        // A. Bright Core (Structural Lines)
        const coreMat = new THREE.LineBasicMaterial({ color: 0xffffff, transparent: true, opacity: 0.8, linewidth: 2 });
        // B. Ghost Shell (Volume/Glass)
        const ghostMat = new THREE.LineBasicMaterial({ color: 0x444444, transparent: true, opacity: 0.15, depthWrite: false });
        // C. Gold Accents
        const goldMat = new THREE.LineBasicMaterial({ color: 0xD4AF37, transparent: true, opacity: 0.6 });

        // Helper: Creates both Core and Ghost meshes for a geometry
        function createHologram(geo, group) {
            const edges = new THREE.EdgesGeometry(geo);
            const core = new THREE.LineSegments(edges, coreMat);
            const ghost = new THREE.LineSegments(edges, ghostMat);
            ghost.scale.set(1.02, 1.02, 1.02); // Slight offset for depth
            group.add(core);
            group.add(ghost);
            return core;
        }

        // --- 4. ARCHITECTURAL MODELS ---

        // A. THE TOWER (Skyscraper)
        const towerGroup = new THREE.Group();
        // Central Shaft
        createHologram(new THREE.BoxGeometry(4, 25, 4), towerGroup);
        // Floors (Plates)
        for(let i=0; i<25; i+=2) {
            const floorGeo = new THREE.BoxGeometry(4.2, 0.1, 4.2);
            floorGeo.translate(0, i - 12.5, 0);
            createHologram(floorGeo, towerGroup);
        }
        // X-Bracing (Gold)
        for(let i=0; i<5; i++) {
            const braceGeo = new THREE.BoxGeometry(4.05, 4, 4.05);
            braceGeo.translate(0, (i*5)-10, 0);
            const edges = new THREE.EdgesGeometry(braceGeo);
            const brace = new THREE.LineSegments(edges, goldMat);
            brace.rotation.y = Math.PI / 4;
            towerGroup.add(brace);
        }
        scene.add(towerGroup);

        // B. THE MUSEUM (Floating Cantilever)
        const museumGroup = new THREE.Group();
        // Main Cantilever
        const mainBlock = new THREE.BoxGeometry(18, 5, 8);
        createHologram(mainBlock, museumGroup);
        // Support Core (Offset)
        const support = new THREE.BoxGeometry(6, 12, 6);
        support.translate(-4, -4, -2);
        createHologram(support, museumGroup);
        // Floating Gallery (Gold)
        const galleryGeo = new THREE.BoxGeometry(10, 2, 10);
        galleryGeo.translate(5, 2, 0);
        const galleryEdges = new THREE.EdgesGeometry(galleryGeo);
        const galleryLines = new THREE.LineSegments(galleryEdges, goldMat);
        museumGroup.add(galleryLines);
        museumGroup.visible = false;
        scene.add(museumGroup);

        // C. THE OPERA (Ribbed Dome)
        const operaGroup = new THREE.Group();
        // Dome Ribs
        for(let i=0; i<16; i++) {
            const ribGeo = new THREE.TorusGeometry(8, 0.1, 4, 40, Math.PI);
            ribGeo.translate(0, 0, 0);
            const edges = new THREE.EdgesGeometry(ribGeo);
            const line = new THREE.LineSegments(edges, i % 2 === 0 ? coreMat : ghostMat);
            line.rotation.y = (i/16) * Math.PI;
            operaGroup.add(line);
        }
        // Base Rings
        createHologram(new THREE.CylinderGeometry(8, 8, 1, 32, 1, true), operaGroup);
        const floorRing = new THREE.CylinderGeometry(12, 12, 0.5, 32, 1, true);
        floorRing.translate(0, -2, 0);
        createHologram(floorRing, operaGroup);
        operaGroup.visible = false;
        scene.add(operaGroup);

        // D. THE VILLA (Stacked Slabs)
        const homeGroup = new THREE.Group();
        for(let i=0; i<5; i++) {
            const w = 5 + Math.random() * 5;
            const d = 5 + Math.random() * 5;
            const slabGeo = new THREE.BoxGeometry(w, 0.5, d);
            slabGeo.translate((Math.random()-0.5)*3, (i*2)-4, (Math.random()-0.5)*3);
            createHologram(slabGeo, homeGroup);
            
            // Vertical supports
            if (i<4) {
                const colGeo = new THREE.BoxGeometry(0.5, 2, 0.5);
                colGeo.translate(0, (i*2)-3, 0);
                createHologram(colGeo, homeGroup);
            }
        }
        homeGroup.visible = false;
        scene.add(homeGroup);

        // --- 5. ENHANCED STARFIELD ---
        const starGeo = new THREE.BufferGeometry();
        const starCount = 1500;
        const starPos = new Float32Array(starCount * 3);
        const starSizes = new Float32Array(starCount);

        for(let i=0; i<starCount; i++) {
            const i3 = i * 3;
            // Spread stars wide
            starPos[i3] = (Math.random() - 0.5) * 100;
            starPos[i3+1] = (Math.random() - 0.5) * 100;
            starPos[i3+2] = (Math.random() - 0.5) * 50 - 20; // Push back
            starSizes[i] = Math.random() * 0.15;
        }

        starGeo.setAttribute('position', new THREE.BufferAttribute(starPos, 3));
        starGeo.setAttribute('size', new THREE.BufferAttribute(starSizes, 1));

        const starMat = new THREE.PointsMaterial({
            color: 0xffffff,
            size: 0.1,
            transparent: true,
            opacity: 0.6,
            sizeAttenuation: true
        });

        const starField = new THREE.Points(starGeo, starMat);
        scene.add(starField);

        // --- 6. ANIMATION SYSTEM ---
        gsap.registerPlugin(ScrollTrigger);

        const buildings = {
            tower: towerGroup,
            museum: museumGroup,
            opera: operaGroup,
            home: homeGroup,
            grid: towerGroup
        };
        
        let currentBuilding = towerGroup;

        // Intro Animation
        gsap.to(".hero-title", { opacity: 1, y: 0, duration: 2, stagger: 0.2, ease: "power3.out" });
        gsap.to(".hero-fade", { opacity: 1, duration: 2, delay: 1 });

        function switchBuilding(name) {
            const next = buildings[name];
            if(!next || next === currentBuilding) return;

            const prev = currentBuilding;
            currentBuilding = next;

            // Animate OUT
            gsap.to(prev.rotation, { y: prev.rotation.y + 0.5, duration: 1.5 });
            gsap.to(prev.scale, { x: 0, y: 0, z: 0, duration: 1, ease: "back.in(1.7)", onComplete: () => { prev.visible = false; }});

            // Animate IN
            next.visible = true;
            next.rotation.y = -0.5;
            gsap.fromTo(next.scale, { x: 0, y: 0, z: 0 }, { x: 1, y: 1, z: 1, duration: 1.5, ease: "back.out(1.2)", delay: 0.3 });
            gsap.to(next.rotation, { y: 0, duration: 2, ease: "power2.out", delay: 0.3 });
        }

        document.querySelectorAll('section').forEach(section => {
            ScrollTrigger.create({
                trigger: section,
                start: "top center",
                end: "bottom center",
                onEnter: () => switchBuilding(section.dataset.building),
                onEnterBack: () => switchBuilding(section.dataset.building)
            });
        });

        // --- 7. MOUSE & RENDER LOOP ---
        const cursorDot = document.getElementById('cursor-dot');
        const cursorRing = document.getElementById('cursor-ring');
        let mouseX = 0, mouseY = 0;

        document.addEventListener('mousemove', (e) => {
            mouseX = (e.clientX / window.innerWidth - 0.5) * 2;
            mouseY = (e.clientY / window.innerHeight - 0.5) * 2;
            
            // Custom Cursor Logic
            gsap.to(cursorDot, { x: e.clientX, y: e.clientY, duration: 0.1 });
            gsap.to(cursorRing, { x: e.clientX, y: e.clientY, duration: 0.2 });
        });

        // Interactive Links
        document.querySelectorAll('a, button').forEach(el => {
            el.addEventListener('mouseenter', () => gsap.to(cursorRing, { width: 60, height: 60, borderColor: '#D4AF37' }));
            el.addEventListener('mouseleave', () => gsap.to(cursorRing, { width: 40, height: 40, borderColor: 'rgba(255,255,255,0.2)' }));
        });

        function animate() {
            requestAnimationFrame(animate);

            // Rotate Building
            if(currentBuilding) {
                currentBuilding.rotation.y += 0.001;
            }

            // Rotate & Parallax Stars
            starField.rotation.y += 0.0002;
            starField.position.x = mouseX * 2;
            starField.position.y = mouseY * 2;

            // Camera float
            camera.position.x += (mouseX * 3 - camera.position.x) * 0.05;
            camera.position.y += (-mouseY * 3 - camera.position.y) * 0.05;
            camera.lookAt(0, 0, 0);

            renderer.render(scene, camera);
        }
        animate();

        // Resize
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>