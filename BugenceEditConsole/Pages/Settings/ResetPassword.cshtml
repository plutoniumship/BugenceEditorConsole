@page
@model BugenceEditConsole.Pages.Settings.ResetPasswordModel
@{
    ViewData["Title"] = "ResetPassword";
    ViewData["BodyClass"] = "page-settings-resetpassword";

    var userName = (User?.Identity?.IsAuthenticated == true && !string.IsNullOrWhiteSpace(User.Identity?.Name))
        ? User.Identity!.Name!
        : "Administrator";
    var userInitials = new string(userName
        .Split(' ', StringSplitOptions.RemoveEmptyEntries)
        .Where(part => !string.IsNullOrWhiteSpace(part))
        .Select(part => char.ToUpperInvariant(part[0]))
        .Take(2)
        .ToArray());
    if (string.IsNullOrWhiteSpace(userInitials))
    {
        userInitials = "AD";
    }
    var userEmail = User?.Claims?.FirstOrDefault(c => c.Type == System.Security.Claims.ClaimTypes.Email)?.Value;
    var displayEmail = string.IsNullOrWhiteSpace(userEmail) ? "—" : userEmail;
}

@section Head {
<style>
        :root {
            --bg: #020202;
            --surface: #0a0a0a;
            --surface-hover: #121212;
            --border: rgba(255,255,255,0.08);
            --text: #e5e5e5;
            --muted: #737373;
            --accent: #06b6d4;
            --accent-dim: rgba(6,182,212,0.1);
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
        }
        * { box-sizing: border-box; outline: none; scrollbar-width: thin; scrollbar-color: #333 transparent; }
        body { margin:0; background: var(--bg); color: var(--text); font-family: 'Satoshi', sans-serif; display:flex; height: 100vh; overflow: hidden; }
        .shell { display:flex; width:100%; height:100%; }
        aside {
            width: 260px; flex-shrink: 0; background: #050505;
            border-right: 1px solid var(--border); padding: 24px;
            display: flex; flex-direction: column; z-index: 20;
        }
        main { flex-grow: 1; padding: 0; overflow-y: auto; background: radial-gradient(circle at 50% 0%, rgba(6,182,212,0.04), transparent 50%); position: relative; }
        .content-container { max-width: 1200px; margin: 0 auto; padding: 40px; }
        .brand { font-family: 'Cabinet Grotesk', sans-serif; font-weight:800; font-size: 1.2rem; color:white; text-decoration:none; margin-bottom:40px; display:flex; gap:10px; align-items:center; letter-spacing: -0.5px; }
        .menu-label { font-size:0.7rem; color:#444; font-weight:700; margin:20px 0 8px 12px; text-transform:uppercase; letter-spacing:1px; }
        .text-secondary { color: var(--muted); }
        .nav-item {
            padding:10px 14px; color:var(--muted); text-decoration:none; display:flex; gap:12px; align-items:center;
            font-weight:600; border-radius:10px; margin-bottom:4px; transition:0.2s; font-size:0.9rem;
        }
        .nav-item:hover { background: var(--surface-hover); color: white; }
        .nav-item.active { background: var(--surface-hover); color: white; border: 1px solid var(--border); }
        .nav-icon { width: 20px; text-align: center; }
        .avatar-chip { background: rgba(255,255,255,0.06); border: 1px solid var(--border); display:flex; align-items:center; gap:10px; padding:8px 12px; border-radius:12px; color:white; cursor:pointer; transition:0.2s; box-shadow: inset 0 0 0 1px rgba(255,255,255,0.02); }
        .avatar-chip:hover { background: var(--surface-hover); border-color: rgba(255,255,255,0.2); }
        .avatar-dot { width:34px; height:34px; border-radius:50%; background: linear-gradient(135deg, #2dd4bf, #06b6d4); color:#041017; font-weight:800; display:grid; place-items:center; }
        .avatar-meta { display:flex; flex-direction:column; line-height:1.2; }
        .dropdown-wrapper { position: relative; }
        .dropdown-menu {
            position: absolute; top: 120%; right: 0; width: 320px;
            background: #0c0c0c; border: 1px solid var(--border); border-radius: 16px;
            box-shadow: 0 10px 40px -10px rgba(0,0,0,0.8);
            opacity: 0; transform: translateY(-10px); pointer-events: none;
            transition: 0.2s cubic-bezier(0.16, 1, 0.3, 1); z-index: 100;
            overflow: hidden;
        }
        .dropdown-menu.top-open { top: auto; bottom: 120%; transform: translateY(10px); }
        .dropdown-menu.top-open.show { transform: translateY(0); }
        .dropdown-menu.show { opacity: 1; transform: translateY(0); pointer-events: auto; }
        .profile-dd { border-radius: 16px; }
        .profile-dd .dd-body { padding: 10px; }
        .profile-dd .profile-option {
            display: flex; align-items: center; gap: 10px;
            padding: 10px 12px; border-radius: 10px; text-decoration: none;
            color: #e5e7eb; font-weight: 600; transition: 0.2s;
        }
        .profile-dd .profile-option:hover { background: rgba(255,255,255,0.06); color: white; }
        .profile-dd .profile-option i { width: 18px; text-align: center; color: var(--muted); }
        .profile-dd .profile-option:hover i { color: white; }
        #sidebarProfileDropdown { width: 240px; left: 0; right: auto; }
        #sidebarProfileDropdown .dd-body { display: flex; flex-direction: column; gap: 6px; }
        #sidebarProfileDropdown .profile-option { background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.08); border-radius: 12px; }
        #sidebarProfileDropdown .profile-option:hover { border-color: rgba(255,255,255,0.2); }

        .page-header { margin-bottom: 24px; }
        .page-title { font-family: 'Cabinet Grotesk', sans-serif; font-size: 2.4rem; margin: 0 0 8px; }
        .page-subtitle { color: var(--muted); margin: 0; }
        .card { background: var(--surface); border: 1px solid var(--border); border-radius: 18px; padding: 20px; box-shadow: 0 20px 40px -10px rgba(0,0,0,0.45); }
        .card-title { font-weight: 700; font-size: 1rem; margin-bottom: 14px; display:flex; align-items:center; gap:10px; }
        .input { background: #050505; border: 1px solid var(--border); border-radius: 12px; padding: 10px 12px; color: white; font-family: inherit; width: 100%; }
        .input:focus { border-color: rgba(6,182,212,0.7); box-shadow: 0 0 0 3px rgba(6,182,212,0.2); }
        .field-error { color: #f87171; font-size: 0.75rem; min-height: 16px; }
        .input.error { border-color: rgba(248,113,113,0.6); box-shadow: 0 0 0 3px rgba(248,113,113,0.15); }
        .btn-row { display:flex; gap:10px; flex-wrap: wrap; margin-top: 16px; }
        .btn { border: 1px solid var(--border); background: rgba(255,255,255,0.06); color: white; padding: 10px 14px; border-radius: 12px; font-weight: 700; cursor: pointer; text-decoration: none; display:inline-flex; align-items:center; gap:8px; }
        .btn.primary { background: var(--accent); color: black; border-color: transparent; }
        .btn.danger { background: rgba(239,68,68,0.12); color: #fecaca; border-color: rgba(239,68,68,0.2); }
        .toast { position: fixed; bottom: 24px; right: 24px; background: #0b0e14; border: 1px solid var(--border); color: white; padding: 12px 16px; border-radius: 12px; box-shadow: 0 18px 40px rgba(0,0,0,0.6); display:none; z-index: 1000; }
        .toast.show { display: inline-flex; align-items:center; gap:10px; }
        @@media (max-width: 720px) { .content-container { padding: 24px 16px 40px; } aside { display: none; } }
    </style>
}

<div class="content-container">

                <div class="page-header">
                    <h1 class="page-title">Reset Password</h1>
                    <p class="page-subtitle">Update your password to keep your account secure.</p>
                </div>

                <div class="card">
                    <div class="card-title"><i class="fa-solid fa-key"></i> Password Update</div>
                    <div class="form-field">
                        <label class="text-secondary" style="font-size:0.8rem; font-weight:700; text-transform:uppercase;">Current Password</label>
                        <input class="input" id="currentPassword" type="password" placeholder="••••••••" />
                        <span class="field-error" data-error-for="currentPassword"></span>
                    </div>
                    <div class="form-field" style="margin-top:12px;">
                        <label class="text-secondary" style="font-size:0.8rem; font-weight:700; text-transform:uppercase;">New Password</label>
                        <input class="input" id="newPassword" type="password" placeholder="At least 8 characters" />
                        <span class="field-error" data-error-for="newPassword"></span>
                    </div>
                    <div class="form-field" style="margin-top:12px;">
                        <label class="text-secondary" style="font-size:0.8rem; font-weight:700; text-transform:uppercase;">Confirm Password</label>
                        <input class="input" id="confirmPassword" type="password" placeholder="Re-enter new password" />
                        <span class="field-error" data-error-for="confirmPassword"></span>
                    </div>
                    <div class="btn-row">
                        <button class="btn primary" id="passwordSave"><i class="fa-solid fa-floppy-disk"></i> Save Password</button>
                        <button class="btn" id="passwordReset"><i class="fa-solid fa-rotate-left"></i> Reset</button>
                        <a class="btn" href="/Settings/Profile"><i class="fa-solid fa-arrow-left"></i> Back to Account</a>
                        <a class="btn danger" href="/Auth/ForgotPassword"><i class="fa-solid fa-triangle-exclamation"></i> Forgot Password</a>
                    </div>
                </div>
            </div>




